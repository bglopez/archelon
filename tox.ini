[tox]
envlist = archelond, docs
skip_missing_interpreters = True
skipsdist = True

[testenv:archelond]
envlist = py27
changedir = {toxinidir}/archelond
whitelist_externals = cp
deps =
    -e{toxinidir}/archelond
    -r{toxinidir}/archelond/test_requirements.txt
commands =
    py.test {posargs}
    cp .coverage ../

[testenv:docs]
envlist = py27
changedir=docs
deps =
    -r{toxinidir}/doc_requirements.txt
commands=
    sphinx-build -W -b html -d {envtmpdir}/doctrees .  {toxinidir}/docs/_build

[testenv:diffcover]
whitelist_externals =
    rm
    diff-cover
    coverage

envlist = py27
deps =
    diff-cover
    coverage
commands =
    coverage xml -i
    diff-cover coverage.xml
    rm coverage.xml
